<div class="container">
  <app-nav-bar></app-nav-bar>

  <h1 class="title">Список автомобилей</h1>

  <app-search-form (searchQueryChange)="searchQuery = $event; loadCars()"></app-search-form>

  <button class="filterButton" (click)="toggleFilter()">
    {{ isFilterVisible ? 'Скрыть фильтры' : 'Показать фильтры' }}
  </button>

  <app-filter-form
    *ngIf="isFilterVisible"
    [filterParams]="filterParams"
    (filterChange)="filterParams = $event"
    (applyFilter)="applyFilter()"
  ></app-filter-form>

  <ul class="list">
    <li *ngFor="let car of cars" class="carItem">
      <img [src]="car.image" alt="{{ car.marka }} {{ car.model }}" class="carImage" />

      <div class="carInfo">
        <div class="header">
          <h2>{{ car.marka }} {{ car.model }}</h2>

          <span
            class="likeIcon"
            [ngClass]="{ liked: car.liked }"
            (click)="toggleLike(car.id)"
          >
            ❤️
          </span>
        </div>

        <div class="details">
          {{ car.year }}/{{ car.mileage }}km/{{ car.body_type }}/{{ car.transmission }}
        </div>
        <div class="footer">{{ car.price }} ₸</div>
      </div>
    </li>
  </ul>
</div>
